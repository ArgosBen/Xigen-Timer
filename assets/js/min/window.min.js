!function(){var e,n,i=require("nw.gui"),o=i.Window.get(),t=new i.Menu;t.append(new i.MenuItem({type:"normal",label:"Show Timer"})),XIGENTIMER.launchExternal=function(e){i.Shell.openExternal(e)},XIGENTIMER.close=function(){XIGENTIMER.VIEWMODEL.isLoggedIn()&&(XIGENTIMER.VIEWMODEL.isTiming()||XIGENTIMER.TIMER.getTime().time>0)?(XIGENTIMER.VIEWMODEL.isTiming()?n="Timer is running, are you sure you want to close?":XIGENTIMER.TIMER.getTime().time-1>0&&(n="There is time on the clock which hasn't been sent yet. Are you sure you want to close?"),confirm(n)&&o.close()):o.close()},XIGENTIMER.minimize=function(){o.minimize()},XIGENTIMER.goToTray=function(){o.once("minimize",function(){this.hide(),e=new i.Tray({icon:"assets/img/xigen_logo_whiteout.png"}),e.on("click",function(){o.show(),this.remove(),e=null}),e.menu=t,t.items[0].click=function(){o.show(),e.remove(),e=null}}),o.minimize()}}();