$(function(){"use strict";var e,t="http://projects.xigen.co.uk/rest/v1/",n="http://projects.xigen.co.uk/ImagePage.aspx?t=0",i=require("node-rest-client").Client,o=new i,a={email:"matt@xigen.co.uk",userID:0};$(document).foundation(),e={getCurrentUser:function(){o.get(t+"users",{headers:{Authorization:"Basic bWF0dG06NmdyZWVuY2F0","Content-Type":"application/json"}},function(e){$.each(JSON.parse(e),function(e,t){t.EMail===a.email&&(console.log(t),a.userID=t.UserID,a.name=t.Name,$(".right .active a").prepend("<img src="+n+"&h="+t.AvatarHash+"&id="+t.UserID+" />"))})})},getTimelogs:function(){o.get(t+"timelogs",{headers:{Authorization:"Basic bWF0dG06NmdyZWVuY2F0","Content-Type":"application/json"}},function(e){var t=JSON.parse(e).filter(function(e){return e.UserID===a.userID});$.each(t,function(){$("body").append("<p>"+this.Duration+" hours doing task: "+this.Description+"</p>")})})},getProjects:function(){o.get(t+"projects",{headers:{Authorization:"Basic bWF0dG06NmdyZWVuY2F0","Content-Type":"application/json"}},function(e){var t=JSON.parse(e),n=t.filter(function(e){return console.log(e.Members.split("\n"),a.name),e.Members.split("\n").indexOf(a.name)>-1});console.log(n),$(".side-nav").empty(),$.each(n,function(){$(".side-nav").append("<li><a href='#'>"+this.Name+"</a></li>")})})}},window.API=e,e.getCurrentUser()});