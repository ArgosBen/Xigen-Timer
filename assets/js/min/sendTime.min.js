$(function(){"use strict";var e={SEND_CLASS:"do-send",PENDING_TEXT:"Sending...",MARKING_TEXT:"Marking for review...",SUCCESS_TEXT:"Done!",DESC_SEL:"[id=desc]"};e.DEFAULT_TEXT=$("."+e.SEND_CLASS).text(),$("."+e.SEND_CLASS).on("click",function(){var E,I,T,t=$(e.DESC_SEL).val(),i=XIGENTIMER.VIEWMODEL.selectedProject(),n=$("#isBillable").prop("checked"),c=$("#markReview").prop("checked"),o=$(this);E=XIGENTIMER.TIMER.getTime()/3600,E=E.toFixed(2),T=function(){o.text(e.SUCCESS_TEXT),setTimeout(function(){o.text(e.DEFAULT_TEXT)},3e3)},$(this).text(e.PENDING_TEXT),localforage.getItem("user",function(e){I=e.UserID}).then(function(){XIGENTIMER.API.logTime(I,i,E,n,t,function(e){console.log(I,i,E,n,t),e&&(c?XIGENTIMER.API.markForReview(i,function(){T()}):T(),XIGENTIMER.reset())})})}),XIGENTIMER.reset=function(){XIGENTIMER.TIMER.setTime(0),XIGENTIMER.UPDATEPOPUP.find("input").val(0),$(e.DESC_SEL).val("").trigger("change"),$("#isBillable").prop("checked",!0),$("#markReview").prop("checked",!1),XIGENTIMER.VIEWMODEL.recalcCanSend(),XIGENTIMER.VIEWMODEL.selectedProject(!1),XIGENTIMER.BREADCRUMB_CONTAINER.empty().append(XIGENTIMER.BREADCRUMB_EMPTY),XIGENTIMER.renderTimeLogs()}});