$(function(){"use strict";var e={SEND_CLASS:"do-send",PENDING_TEXT:"Sending...",MARKING_TEXT:"Marking for review...",SUCCESS_TEXT:"Done!",DESC_SEL:"[id=desc]"};e.DEFAULT_TEXT=$("."+e.SEND_CLASS).text(),$("."+e.SEND_CLASS).on("click",function(){var E,t,n,o=$(e.DESC_SEL).val(),i=XIGENTIMER.VIEWMODEL.selectedProject(),T=$("#isBillable").prop("checked"),c=$("#markReview").prop("checked"),S=$(this);E=XIGENTIMER.TIMER.getTime()/3600,E=E.toFixed(2),n=function(){S.text(e.SUCCESS_TEXT),setTimeout(function(){S.text(e.DEFAULT_TEXT)},3e3)},$(this).text(e.PENDING_TEXT),localforage.getItem("user",function(e){t=e.UserID}).then(function(){console.log("sending time"),XIGENTIMER.API.logTime(t,i,E,T,o,function(e){console.log(e),e&&(c?XIGENTIMER.API.markForReview(i,function(){n()}):n(),XIGENTIMER.reset())})})})});