$(function(){"use strict";var e={SEND_CLASS:"do-send",PENDING_TEXT:"Sending...",MARKING_TEXT:"Marking for review...",SUCCESS_TEXT:"Done!",ERROR_TEXT:"Error :(",DESC_SEL:"[id=desc]"};e.DEFAULT_TEXT=$("."+e.SEND_CLASS).text(),$("."+e.SEND_CLASS).on("click",function(){XIGENTIMER.sendTime()}),XIGENTIMER.sendTime=function(){var E,t,T,n=$(e.DESC_SEL).val(),i=XIGENTIMER.VIEWMODEL.selectedProject(),o=$("#isBillable").prop("checked"),I=$("#markReview").prop("checked"),r=$("."+e.SEND_CLASS);return XIGENTIMER.VIEWMODEL.canSendTime()?(E=XIGENTIMER.TIMER.getTime()/3600,E=E.toFixed(2),T=function(){r.text(e.SUCCESS_TEXT),setTimeout(function(){r.text(e.DEFAULT_TEXT)},3e3)},r.text(e.PENDING_TEXT),localforage.getItem("user",function(e){t=e.UserID}).then(function(){XIGENTIMER.API.logTime(t,i,E,o,n,function(E){E?(I?XIGENTIMER.API.markForReview(i,function(){T()}):T(),XIGENTIMER.reset()):(r.removeClass("info").addClass("alert").text(e.ERROR_TEXT),setTimeout(function(){r.text(e.DEFAULT_TEXT).addClass("info").removeClass("alert")},1500))})}),void 0):!1}});