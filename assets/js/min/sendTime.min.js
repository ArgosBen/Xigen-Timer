$(function(){"use strict";var e={SEND_CLASS:"do-send",PENDING_TEXT:"Sending...",MARKING_TEXT:"Marking for review...",SUCCESS_TEXT:"Done!",ERROR_TEXT:"Error :(",DESC_SEL:"[id=desc]"};e.DEFAULT_TEXT=$("."+e.SEND_CLASS).text(),$("."+e.SEND_CLASS).on("click",function(){var E,t,T,i=$(e.DESC_SEL).val(),o=XIGENTIMER.VIEWMODEL.selectedProject(),n=$("#isBillable").prop("checked"),r=$("#markReview").prop("checked"),s=$(this);E=XIGENTIMER.TIMER.getTime()/3600,E=E.toFixed(2),T=function(){s.text(e.SUCCESS_TEXT),setTimeout(function(){s.text(e.DEFAULT_TEXT)},3e3)},$(this).text(e.PENDING_TEXT),localforage.getItem("user",function(e){t=e.UserID}).then(function(){XIGENTIMER.API.logTime(t,o,E,n,i,function(E){E?(r?XIGENTIMER.API.markForReview(o,function(){T()}):T(),XIGENTIMER.reset()):(s.removeClass("info").addClass("alert").text(e.ERROR_TEXT),setTimeout(function(){s.text(e.DEFAULT_TEXT).addClass("info").removeClass("alert")},1500))})})})});